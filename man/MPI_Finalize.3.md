---
date: Unreleased developer copy
section: 3
title: MPI\_Finalize
---

NAME
====

**MPI\_Finalize ** - Terminates MPI execution environment.

SYNTAX
======

C Syntax
========

    #include <mpi.h>
    int MPI_Finalize()

OUTPUT PARAMETER
================

IERROR

:   Fortran only: Error status (integer).

DESCRIPTION
===========

This routine cleans up all MPI states. Once this routine is called, no
MPI routine (not even MPI\_Init) may be called, except for
MPI\_Get\_version, MPI\_Initialized, and MPI\_Finalized. Unless there
has been a call to MPI\_Abort, you must ensure that all pending
communications involving a process are complete before the process calls
MPI\_Finalize. If the call returns, each process may either continue
local computations or exit without participating in further
communication with other processes. At the moment when the last process
calls MPI\_Finalize, all pending sends must be matched by a receive, and
all pending receives must be matched by a send.

MPI\_Finalize is collective over all connected processes. If no
processes were spawned, accepted, or connected, then this means it is
collective over MPI\_COMM\_WORLD. Otherwise, it is collective over the
union of all processes that have been and continue to be connected.

NOTES
=====

All processes must call this routine before exiting. All processes will
still exist but may not make any further MPI calls. MPI\_Finalize
guarantees that all local actions required by communications the user
has completed will, in fact, occur before it returns. However,
MPI\_Finalize guarantees nothing about pending communications that have
*not* been completed; completion is ensured only by MPI\_Wait,
MPI\_Test, or MPI\_Request\_free combined with some other verification
of completion.

For example, a successful return from a blocking communication operation
or from MPI\_Wait or MPI\_Test means that the communication is completed
by the user and the buffer can be reused, but does not guarantee that
the local process has no more work to do. Similarly, a successful return
from MPI\_Request\_free with a request handle generated by an MPI\_Isend
nullifies the handle but does not guarantee that the operation has
completed. The MPI\_Isend is complete only when a matching receive has
completed.

If you would like to cause actions to happen when a process finishes,
attach an attribute to MPI\_COMM\_SELF with a callback function. Then,
when MPI\_Finalize is called, it will first execute the equivalent of an
MPI\_Comm\_free on MPI\_COMM\_SELF. This will cause the delete callback
function to be executed on all keys associated with MPI\_COMM\_SELF in
an arbitrary order. If no key has been attached to MPI\_COMM\_SELF, then
no callback is invoked. This freeing of MPI\_COMM\_SELF happens before
any other parts of MPI are affected. Calling MPI\_Finalized will thus
return \"false\" in any of these callback functions. Once you have done
this with MPI\_COMM\_SELF, the results of MPI\_Finalize are not
specified.

ERRORS
======

Almost all MPI routines return an error value; C routines as the value
of the function and Fortran routines in the last argument.

Before the error value is returned, the current MPI error handler is
called. By default, this error handler aborts the MPI job, except for
I/O function errors. The error handler may be changed with
MPI\_Comm\_set\_errhandler; the predefined error handler
MPI\_ERRORS\_RETURN may be used to cause error values to be returned.
Note that MPI does not guarantee that an MPI program can continue past
an error.

SEE ALSO
========

    MPI_Init
    MPI_Init_thread
    MPI_Initialized
    MPI_Finalized
